<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>GeoGebra 範囲固定・縦長サンプル</title>

<!-- スタイル：スマホでも縦長でフィットさせる -->
<style>
  html,body{margin:0;height:100%;}
  #ggb-container{
    width:100%;
    /* 画面を縦長に使いたい場合はアスペクト比を大きくする */
    aspect-ratio: 9 / 16;   /* 幅 : 高さ ＝ 9 : 16 */
    max-height:90vh;        /* 画面高の 90% まで */
    margin:0 auto;
  }
</style>

<!-- ggbOnInit を **先に** 宣言 -->
<script>
  let ggbApplet;                       // 後で使うために外へ出す
  function fixView() {
    // -0.5 ≤ x ≤ 7,  -7 ≤ y ≤ 7
    ggbApplet.setCoordSystem(-0.5, 7, -7, 7);
  }
  function ggbOnInit() {
    /* 初期化直後に一度 */
    fixView();
    /* GeoGebra の自動ズームが終わった後にもう一度 */
    setTimeout(fixView, 200);
  }
</script>

<!-- GeoGebra JS API -->
<script src="https://www.geogebra.org/apps/deployggb.js"></script>
</head>
<body>

<div id="ggb-container"></div>

<script>
  /* GGBApplet インスタンスを作成（第2引数 true で ggbOnInit が有効） */
  ggbApplet = new GGBApplet({
      material_id: "nkk867we",   // ← あなたの素材 ID
      showToolBar: false,
      showMenuBar: false,
      showAlgebraInput: false,
      enableRightClick: false,
      enableShiftDragZoom: false
  }, /* useBrowserForJS */ true);

  /* ページロード完了で埋め込む */
  window.addEventListener("load", () => {
    ggbApplet.inject("ggb-container");
  });
</script>

</body>
</html>
